# HSE_Zoo_ManagementSystem
Конструирование Программного Обеспечения. Домашняя работа №1. Закрепление концепции Domain-Driven Design и принципов проектирования Clean Architecture. 

Напомню условие: вам предстоит разработать веб-приложение для автоматизации следующих бизнес-процессов зоопарка: управление животными; вольерами; расписанием кормлений. 

Решение было разделено на 4 проекта (в соответствии с Clean Architecture):

1. `Domain` - нижний слой (сущности, доменные события, Value Objects)
2.  `Application` - слой, содержащий
3.  `Infrastructure` - слой
4.  `Presentation` - слой, но сам проект имеет название ZooWebApi



Реализованный функционал
Use Cases
1. Добавление/удаление животных
   - Реализовано в `AnimalController` (`createAnimal`, `deleteAnimal`)
   - Бизнес-логика в `AnimalService`

2. Добавление/удаление вольеров
   - Реализовано в `EnclosureController` (`createEnclosure`, `deleteEnclosure`)
   - Бизнес-логика в `EnclosureService`

3. Перемещение животных между вольерами
   - Реализовано в `AnimalTransferController` (`transferAnimal`)
   - Бизнес-логика в `AnimalTransferService`
   - Генерируется доменное событие `AnimalMovedEvent`
   - Создается запись о перемещении в `TransferRecord`

4. Просмотр расписания кормления
   - Реализовано в `FeedingScheduleController` (`getFeedingSchedules`)
   - Бизнес-логика в `FeedingOrganizationService`

5. Добавление кормления в расписание
   - Реализовано в `FeedingScheduleController` (`addFeedingSchedule`)
   - Поддержка повторяющихся кормлений через `IsRecurring`
   - Генерируется доменное событие `FeedingTimeEvent` при наступлении времени кормления

6. Просмотр статистики зоопарка
   - Реализовано в `StatisticsController`
   - Получение общей статистики, статистики по кормлениям и использованию вольеров



Концепции Domain-Driven Design

1. Богатая доменная модель (доменные сущности содержат не только данные, но и бизнес-логику):
   - Animal: методы `Feed()`, `Treat()`, `MoveToEnclosure()`
   - Enclosure: методы `AddAnimal()`, `RemoveAnimal()`, `Clean()`
   - FeedingSchedule: методы `Reschedule()`, `MarkAsCompleted()`, `RaiseFeedingTimeEvent()`

2. Value Objects (выделены value objects для обеспечения типобезопасности и инкапсуляции бизнес-правил):
   - AnimalType и EnclosureType - для проверки совместимости животных и вольеров
   - AnimalSpecies - для детализации вида животного
   - FoodType - для определения типа пищи
   - Gender - для указания пола
   - HealthStatus - для статуса здоровья животного

3. Доменные события
   - `AnimalMovedEvent` - генерируется при перемещении животного
   - `FeedingTimeEvent` - генерируется при наступлении времени кормления
   - Интерфейс `IHasDomainEvents` для сущностей, способных генерировать события
   - Механизм диспетчеризации событий через `IDomainEventDispatcher`

4. Инкапсуляция инвариантов (бизнес-правила защищены внутри сущностей):
   - Проверка совместимости типа животного и вольера при перемещении
   - Проверка вместимости вольера перед размещением животного
   - Проверка совместимости пищи и животного при кормлении


Принципы Clean Architecture
1. Разделение на слои (четкое разделение на слои, организованные по принципу зависимостей внутрь):

   
   1.1. Domain - ядро системы:
   - Сущности (`Animal`, `Enclosure`, `FeedingSchedule`, и т.д.)
   - Value Objects (`AnimalType`, `FoodType`, и т.д.)
   - Доменные события (`AnimalMovedEvent`, `FeedingTimeEvent`)


   1.2. Application - бизнес-логика:
   - Сервисы (`AnimalService`, `FeedingOrganizationService`, и т.д.)
   - Интерфейсы репозиториев (`IAnimalRepository`, `IEnclosureRepository`, и т.д.)
   - Обработчики событий (`AnimalMovedEventHandler`, `FeedingTimeEventHandler`)



   1.3. Infrastructure - техническая реализация:
   - In-memory репозитории
   - Фоновые сервисы (`FeedingBackgroundService`)




   1.4. Presentation (ZooWebApi) - интерфейс взаимодействия:
   - REST API контроллеры
   - DTO-объекты
3. Зависимости через интерфейсы

   
   2.1. Репозитории определены через интерфейсы в Application-слое:
   - IAnimalRepository, IEnclosureRepository, и т.д.



   2.2. Реализация репозиториев в Infrastructure-слое:
   - InMemoryAnimalRepository, InMemoryEnclosureRepository, и т.д.




   2.3. Внедрение зависимостей через конструкторы сервисов и контроллеров

3. Изоляция бизнес-логики
   - Доменная логика полностью инкапсулирована в Domain-слое
   - Правила применения бизнес-операций находятся в Application-слое
   - Presentation-слой содержит только логику маппинга DTO и HTTP-ответов
   - Реализация Infrastructure-слоя не влияет на бизнес-логику
4. Механизм событий
   - Фоновый сервис `FeedingBackgroundService` для проверки расписания кормлений
   - Обработчики доменных событий в Application-слое
   - Диспетчер событий для распределения событий по обработчикам
  

##Реализованные улучшения

1. Контроль совместимости животных и вольеров
   - Проверка типа животного и вольера при перемещении
   - Защита от размещения хищников с травоядными

2. Автоматизация кормления
   - Поддержка повторяющихся кормлений
   - Фоновый сервис для отслеживания расписания
   - Обработка событий кормления

3. Ведение журналов
   - Записи о перемещениях животных
   - Записи о кормлениях

4. Статистика для мониторинга
   - Общая статистика животных
   - Мониторинг использования вольеров
   - Выявление животных без расписания кормления



Итог: система полностью реализует требуемую функциональность согласно принципам DDD и Clean Architecture, обеспечивая безопасное расселение животных по вольерам соответствующего типа и надежный контроль процессов кормления.
